# MPI Лабораторные работы

Этот проект содержит реализации четырех заданий по параллельному программированию с использованием MPI.

## Структура проекта

- `task1_monte_carlo_pi.c` - Задание 1: Вычисление π методом Монте-Карло
- `task2_matrix_vector.c` - Задание 2: Умножение матрицы на вектор (разбиение по строкам, столбцам, блокам)
- `task3_cannon_matrix_mult.c` - Задание 3: Матричное умножение по алгоритму Кэннона
- `task4_dirichlet.c` - Задание 4: Решение задачи Дирихле методом Гаусса-Зейделя
- `Makefile` - Файл для компиляции
- `plot_results.py` - Скрипт для построения графиков
- `run_experiments.sh` - Скрипт для запуска экспериментов

## Компиляция

```bash
make
```

Для компиляции отдельных заданий:

```bash
make task1_monte_carlo_pi
make task2_matrix_vector
make task3_cannon_matrix_mult
make task4_dirichlet
```

## Задание 1: Вычисление π методом Монте-Карло

Метод: случайный выбор точек внутри квадрата 2x2 и подсчет попаданий в единичную окружность.

### Использование:

```bash
mpirun -np <число_процессов> ./task1_monte_carlo_pi <общее_количество_точек>
```

### Пример:

```bash
mpirun -np 4 ./task1_monte_carlo_pi 10000000
```

## Задание 2: Умножение матрицы на вектор

Реализованы три метода разбиения:
- **r** - разбиение по строкам
- **c** - разбиение по столбцам
- **b** - разбиение по блокам (требует квадратное число процессов)

### Использование:

```bash
mpirun -np <число_процессов> ./task2_matrix_vector <размер_матрицы> <метод>
```

### Примеры:

```bash
# Разбиение по строкам
mpirun -np 4 ./task2_matrix_vector 1000 r

# Разбиение по столбцам
mpirun -np 4 ./task2_matrix_vector 1000 c

# Разбиение по блокам (требует квадратное число процессов)
mpirun -np 4 ./task2_matrix_vector 1000 b
```

## Задание 3: Матричное умножение по алгоритму Кэннона

Реализация алгоритма Кэннона для параллельного умножения матриц с блочным разбиением.

**Требования:**
- Количество процессов должно быть полным квадратом (1, 4, 9, 16, ...)
- Размер матрицы должен быть кратен корню из количества процессов

### Использование:

```bash
mpirun -np <квадратное_число_процессов> ./task3_cannon_matrix_mult <размер_матрицы>
```

### Пример:

```bash
mpirun -np 4 ./task3_cannon_matrix_mult 600
```

## Задание 4: Задача Дирихле

Решение уравнения Пуассона методом Гаусса-Зейделя с волновой схемой вычислений и блочным представлением данных.

Уравнение:
```
∂²u/∂x² + ∂²u/∂y² = f(x,y),  0 < x < 1, 0 < y < 1
u(0,y) = u(1,y) = u(x,0) = u(x,1) = c
```

**Требования:**
- Количество процессов должно быть полным квадратом
- (размер_сетки - 2) должно быть кратно корню из количества процессов

### Использование:

```bash
mpirun -np <квадратное_число_процессов> ./task4_dirichlet <размер_сетки> <граничное_значение>
```

### Пример:

```bash
mpirun -np 4 ./task4_dirichlet 100 0.0
```

## Запуск экспериментов

Для автоматического запуска всех экспериментов используйте скрипт:

```bash
chmod +x run_experiments.sh
./run_experiments.sh
```

Этот скрипт запустит все задачи с различными параметрами и сохранит результаты в файлы `task*.txt`.

## Построение графиков

Для построения графиков времени выполнения, ускорения и эффективности:

```bash
python3 plot_results.py
```

Или для конкретного задания:

```bash
python3 plot_results.py 1  # Задание 1
python3 plot_results.py 2  # Задание 2
python3 plot_results.py 3  # Задание 3
python3 plot_results.py 4  # Задание 4
```

Графики будут сохранены как PNG файлы: `task1_plots.png`, `task2_plots.png`, и т.д.

## Требования

- MPI (MPICH или OpenMPI)
- Компилятор C с поддержкой C99
- Python 3 с библиотеками: numpy, matplotlib

## Очистка

Для удаления скомпилированных файлов и результатов:

```bash
make clean
```

## Примечания

1. Для заданий 3 и 4 количество процессов должно быть полным квадратом.
2. Размеры данных должны быть выбраны так, чтобы они равномерно распределялись между процессами.
3. Время выполнения может варьироваться в зависимости от системы и нагрузки.

